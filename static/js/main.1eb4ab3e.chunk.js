(this["webpackJsonpcottage-config-admin"]=this["webpackJsonpcottage-config-admin"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},15:function(e,t,n){e.exports={wrap:"style_wrap__SJUwv","form-wrap":"style_form-wrap__1Lsxc","form-item-grid":"style_form-item-grid__379g-","form-item":"style_form-item__1o4Ui","form-item-select":"style_form-item-select__10ReH","inputs-wrap":"style_inputs-wrap__aJR-O",aside:"style_aside__111C_","aside-row":"style_aside-row__8DgVW","aside-row-btn":"style_aside-row-btn__1XPKk","aside-row-btn--reset":"style_aside-row-btn--reset__1X9cV","aside-row-btn--delete":"style_aside-row-btn--delete__1BWbK"}},164:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),c=n.n(i),r=n(18),o=n.n(r),l=n(17),s=n(2),d=n(84),u=n(85),j=n(95),b=n(93),v=n(11),p=n(48),O=n.n(p),h=n(6),f=(n(118),n(8)),m=n.n(f),x=n(19),g=n(5),w=n(34),_=n(13),y=n(10),C=n(7),k=n(61),N=n.n(k),S=function(e){var t=e.children,n=e.className,i=e.level,c=void 0===i?1:i,r=Object(y.a)(e,["children","className","level"]),o="h".concat(c);return Object(a.jsx)(o,Object(s.a)(Object(s.a)({className:Object(C.a)([N.a.heading,n,Object(_.a)({},N.a["heading--h".concat(c)],!!c)])},r),{},{children:t}))};S.defaultProps={level:1};var I=S,E=n(26),L=n.n(E),P=function(e){var t,n=e.type,i=e.onChange,c=e.fw,r=void 0!==c&&c,o=e.textarea,l=void 0!==o&&o,d=e.className,u=e.wrapClass,j=e.rightAddon,b=void 0===j?null:j,v=Object(y.a)(e,["type","onChange","fw","textarea","className","wrapClass","rightAddon"]),p="input";return l&&(p="textarea"),Object(a.jsxs)("div",{className:Object(C.a)([L.a.wrap,u,Object(_.a)({},L.a.fw,r)]),children:[Object(a.jsx)(p,Object(s.a)({type:n,className:Object(C.a)([L.a.input,d,(t={},Object(_.a)(t,L.a["input-fw"],r),Object(_.a)(t,L.a["with-right-addon"],!!b),Object(_.a)(t,L.a.textarea,l),t)]),onChange:i},v)),b&&Object(a.jsx)("div",{className:L.a["right-addon"],children:b()})]})};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var R=i.createElement("path",{d:"M11 2C14.79 2 18.17 4.13 19.82 7.5C18.17 10.87 14.79 13 11 13C7.21 13 3.83 10.87 2.18 7.5C3.83 4.13 7.21 2 11 2ZM11 0C6 0 1.73 3.11 0 7.5C1.73 11.89 6 15 11 15C16 15 20.27 11.89 22 7.5C20.27 3.11 16 0 11 0ZM11 5C12.38 5 13.5 6.12 13.5 7.5C13.5 8.88 12.38 10 11 10C9.62 10 8.5 8.88 8.5 7.5C8.5 6.12 9.62 5 11 5ZM11 3C8.52 3 6.5 5.02 6.5 7.5C6.5 9.98 8.52 12 11 12C13.48 12 15.5 9.98 15.5 7.5C15.5 5.02 13.48 3 11 3Z",fill:"currentColor"});function F(e,t){var n=e.title,a=e.titleId,c=A(e,["title","titleId"]);return i.createElement("svg",T({width:22,height:15,viewBox:"0 0 22 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,R)}var M=i.forwardRef(F);n.p;function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Z=i.createElement("path",{d:"M12 5.99922C15.79 5.99922 19.17 8.12922 20.82 11.4992C20.23 12.7192 19.4 13.7692 18.41 14.6192L19.82 16.0292C21.21 14.7992 22.31 13.2592 23 11.4992C21.27 7.10922 17 3.99922 12 3.99922C10.73 3.99922 9.51 4.19922 8.36 4.56922L10.01 6.21922C10.66 6.08922 11.32 5.99922 12 5.99922ZM10.93 7.13922L13 9.20922C13.57 9.45922 14.03 9.91922 14.28 10.4892L16.35 12.5592C16.43 12.2192 16.49 11.8592 16.49 11.4892C16.5 9.00922 14.48 6.99922 12 6.99922C11.63 6.99922 11.28 7.04922 10.93 7.13922ZM2.01 3.86922L4.69 6.54922C3.06 7.82922 1.77 9.52922 1 11.4992C2.73 15.8892 7 18.9992 12 18.9992C13.52 18.9992 14.98 18.7092 16.32 18.1792L19.74 21.5992L21.15 20.1892L3.42 2.44922L2.01 3.86922ZM9.51 11.3692L12.12 13.9792C12.08 13.9892 12.04 13.9992 12 13.9992C10.62 13.9992 9.5 12.8792 9.5 11.4992C9.5 11.4492 9.51 11.4192 9.51 11.3692ZM6.11 7.96922L7.86 9.71922C7.63 10.2692 7.5 10.8692 7.5 11.4992C7.5 13.9792 9.52 15.9992 12 15.9992C12.63 15.9992 13.23 15.8692 13.77 15.6392L14.75 16.6192C13.87 16.8592 12.95 16.9992 12 16.9992C8.21 16.9992 4.83 14.8692 3.18 11.4992C3.88 10.0692 4.9 8.88922 6.11 7.96922Z",fill:"currentColor"});function B(e,t){var n=e.title,a=e.titleId,c=U(e,["title","titleId"]);return i.createElement("svg",V({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,Z)}var H=i.forwardRef(B),D=(n.p,function(e){var t=Object(i.useState)(!1),n=Object(g.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(P,Object(s.a)(Object(s.a)({type:c?"text":"password"},e),{},{rightAddon:function(){return Object(a.jsx)("button",{type:"button",onClick:function(){return r(!c)},className:L.a["toggle-pass-icon"],children:Object(a.jsx)("div",{className:L.a["toggle-visibility-icon"],children:c?Object(a.jsx)(M,{}):Object(a.jsx)(H,{})})})}}))}),W=n(30),z=n.n(W),J=function(e){var t=e.children,n=e.className,i=e.disabled,c=e.fw,r=e.view,o=e.type,d=e.icon,u=e.to,j=Object(y.a)(e,["children","className","disabled","fw","view","type","icon","to"]);return u?Object(a.jsxs)(l.b,Object(s.a)(Object(s.a)({to:u,disabled:i,className:Object(C.a)([z.a.button,z.a["button-".concat(r)],n,Object(_.a)({},z.a["button-fw"],c)])},j),{},{children:[d&&Object(a.jsx)("div",{className:z.a.icon,children:d}),t]})):Object(a.jsxs)("button",Object(s.a)(Object(s.a)({disabled:i,type:o,className:Object(C.a)([z.a.button,z.a["button-".concat(r)],n,Object(_.a)({},z.a["button-fw"],c)])},j),{},{children:[d&&Object(a.jsx)("div",{className:z.a.icon,children:d}),t]}))};J.defaultProps={fw:!1,size:"m",view:"primary",type:"button",to:""};var K=J,X=n(52),G=n.n(X),Q=function(e){var t=e.align,n=void 0===t?"center":t,c=e.children;return Object(a.jsx)("div",{className:"".concat(G.a["submit-row"]," ").concat(G.a["".concat(n)]),children:i.Children.map(c.filter((function(e){return!!e})),(function(e,t){return Object(a.jsx)("div",{className:G.a["submit-row-item"],children:e},t)}))})},Y=n(88),q=n.n(Y),$=(n(130),function(e){var t=e.children,n=(e.contentClassName,e.className),i=e.isOpen,c=e.onCloseClick,r=e.overlayClassName,o=(e.title,e.ariaTitle),l=e.shouldCloseOnOverlayClick,d=e.verticallyCenter,u=(e.closeBtn,e.wide),j=e.xl,b=e.withPadding,v=(e.fill,e.subtitle,Object(y.a)(e,["children","contentClassName","className","isOpen","onCloseClick","overlayClassName","title","ariaTitle","shouldCloseOnOverlayClick","verticallyCenter","closeBtn","wide","xl","withPadding","fill","subtitle"]));return Object(a.jsx)(q.a,Object(s.a)(Object(s.a)({getApplicationNode:function(){return document.getElementById("root")},dialogClass:Object(C.a)(["modal",n,{"modal--with-padding":!!b,"modal--wide":!!u,"modal--xl":!!j}]),underlayClass:Object(C.a)(["modal-bg",r]),underlayClickExits:l,mounted:i,ariaTitle:o,titleText:o,onExit:c,verticallyCenter:d},v),{},{children:Object(a.jsx)("div",{tabIndex:0,style:{outline:"none"},children:t})}))});$.defaultProps={isOpen:!1,shouldCloseOnOverlayClick:!0,verticallyCenter:!0,titleText:"\u041c\u043e\u0434\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u043a\u043d\u043e",ariaTitle:"\u041c\u043e\u0434\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u043a\u043d\u043e",onCloseClick:function(){}};var ee=$,te=n(53),ne=n.n(te),ae=function(e){var t=e.children,n=e.className,i=e.tagName,c=e.size,r=e.tc,o="div";return i&&(o="".concat(i)),Object(a.jsx)(o,{className:Object(C.a)([ne.a.text,ne.a["text--".concat(c)],Object(_.a)({},ne.a.centered,r),n]),children:t})};ae.defaultProps={size:"m",className:""};var ie=ae,ce=(n(131),function(e){var t=e.size,n=void 0===t?80:t,i=e.color,c=void 0===i?"yellow":i,r=.8*n;return Object(a.jsxs)("div",{className:"lds-ring lds-ring--".concat(c),style:{height:"".concat(n,"px"),width:"".concat(n,"px")},children:[Object(a.jsx)("div",{style:{height:"".concat(r,"px"),width:"".concat(r,"px")}}),Object(a.jsx)("div",{style:{height:"".concat(r,"px"),width:"".concat(r,"px")}}),Object(a.jsx)("div",{style:{height:"".concat(r,"px"),width:"".concat(r,"px")}}),Object(a.jsx)("div",{style:{height:"".concat(r,"px"),width:"".concat(r,"px")}})]})}),re={Accept:"application/json","Content-Type":"application/json"};localStorage.getItem("accessToken")&&(re.Authorization="Bearer ".concat(localStorage.getItem("accessToken")));var oe=O.a.create({baseURL:"https://new-lands.froloff.me/api/v1/",responseType:"json",headers:re}),le=n(42),se=n.n(le);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var je=i.createElement("path",{d:"M9 5C9 7.20914 7.20914 9 5 9C2.79086 9 1 7.20914 1 5C1 2.79086 2.79086 1 5 1",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),be=i.createElement("path",{d:"M9 2.17188L12 6L6 6L9 2.17188Z",fill:"currentColor"});function ve(e,t){var n=e.title,a=e.titleId,c=ue(e,["title","titleId"]);return i.createElement("svg",de({width:13,height:10,viewBox:"0 0 13 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,je,be)}var pe=i.forwardRef(ve),Oe=(n.p,function(e){var t=e.email,n=e.onCancel,c=Object(i.useState)("initial"),r=Object(g.a)(c,2),o=r[0],l=r[1];return"success"===o?Object(a.jsxs)("div",{className:se.a.wrap,children:[Object(a.jsx)(ie,{size:"l",children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"}),Object(a.jsx)(K,{onClick:n,children:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})]}):"error"===o?Object(a.jsxs)("div",{className:se.a.wrap,children:[Object(a.jsx)(ie,{size:"l",children:"\u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"}),Object(a.jsx)(K,{onClick:n,children:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})]}):Object(a.jsxs)("div",{className:se.a.wrap,children:[Object(a.jsx)("div",{className:se.a.textWrap,children:Object(a.jsxs)(ie,{size:"l",children:["\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u043f\u043e\u0447\u0442\u0443 ",Object(a.jsx)("strong",{children:t})]})}),"pending"===o&&Object(a.jsx)(ce,{}),"initial"===o&&Object(a.jsxs)(Q,{align:"space-around",children:[Object(a.jsx)(K,{onClick:function(){l("pending"),oe.post("Users/restore-password",{email:t,callBackUrl:"".concat(window.location.origin,"/reset-password")}).then((function(){l("success")})).catch((function(){l("error")}))},children:"\u0414\u0430, \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)(K,{view:"text",onClick:n,icon:Object(a.jsx)(pe,{}),children:"\u041d\u0430\u0437\u0430\u0434"})]})]})}),he=n(14),fe={Admin:{value:"Admin",label:"\u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},Owner:{value:"Owner",label:"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446"}},me={defaultError:" \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",500:" \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0438\u0441\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c",400:"\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441",413:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439"},xe=Object.values(fe).map((function(e){return e})),ge=function(e){return me[e]||me.defaultError},we=function(e){return e===fe.Owner.value},_e=function(e){return e.toLocaleString("ru-RU",{style:"currency",currency:"rub"}).replace(",00","")},ye=function(e,t){var n=Math.floor(t);return e[n%100>4&&n%100<20?2:[2,0,1,1,1,2][n%10<5?n%10:5]]},Ce=n(36),ke=n.n(Ce);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ie=i.createElement("path",{d:"M17 12C17 15.3137 14.3137 18 11 18C7.68629 18 5 15.3137 5 12C5 8.68629 7.68629 6 11 6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),Ee=i.createElement("path",{d:"M17 7L20 11H14L17 7Z",fill:"currentColor"}),Le=i.createElement("circle",{cx:11,cy:12,r:2,fill:"currentColor"}),Pe=i.createElement("rect",{x:16,y:10,width:2,height:2,fill:"currentColor"});function Te(e,t){var n=e.title,a=e.titleId,c=Se(e,["title","titleId"]);return i.createElement("svg",Ne({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,Ie,Ee,Le,Pe)}var Ae=i.forwardRef(Te),Re=(n.p,function(e){var t=e.handleAuthState,n=Object(i.useState)(!1),c=Object(g.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(""),s=Object(g.a)(l,2),d=s[0],u=s[1],j=Object(i.useState)(""),b=Object(g.a)(j,2),v=b[0],p=b[1],O=Object(i.useState)(!1),f=Object(g.a)(O,2),_=f[0],y=f[1];console.log("test");var C=d.trim().length&&v.trim().length,k=function(){var e=Object(x.a)(m.a.mark((function e(n){var a,i,c,r,l,s,u,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o(!0),e.prev=2,e.next=5,oe.post("Users/login",{email:d,password:v});case 5:(null===(c=e.sent)||void 0===c||null===(a=c.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.accessToken)?t(c.data.data.accessToken):ge(null===n||void 0===n||null===(r=n.response)||void 0===r?void 0:r.status),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o(!1),h.b.error((null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(s=l.data)||void 0===s||null===(u=s.meta)||void 0===u?void 0:u.message)||ge(null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j?void 0:j.status));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:ke.a.wrap,children:[Object(a.jsx)(w.a,{children:Object(a.jsx)("title",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(I,{children:"\u041f\u0440\u0438\u0432\u0435\u0442! \u042d\u0442\u043e \u0430\u0434\u043c\u0438\u043d\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440\u0430 \u043a\u043e\u0442\u0442\u0435\u0434\u0436\u0435\u0439"}),_&&Object(a.jsx)(ee,{className:"popup-restore-pass",isOpen:!0,onExit:function(){return y(!1)},children:Object(a.jsx)(Oe,{email:d,onCancel:function(){return y(!1)}})}),Object(a.jsxs)("form",{className:ke.a.form,onSubmit:k,autoComplete:"off",children:[Object(a.jsx)("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),Object(a.jsxs)("div",{className:ke.a["input-wrap"],children:[Object(a.jsx)(P,{value:d,type:"email",fw:!0,wrapClass:ke.a["input-row"],disabled:r,onChange:function(e){u(e.target.value)}}),Object(a.jsx)(D,{value:v,disabled:r,fw:!0,wrapClass:ke.a["input-row"],onChange:function(e){p(e.target.value)}})]}),Object(a.jsxs)(Q,{children:[Object(a.jsx)(K,{disabled:!C||r,type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsx)(K,{view:"text",onClick:function(){return y(!0)},disabled:r||!d.trim().length,icon:Object(a.jsx)(Ae,{}),children:"\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})]})}),Fe=n(92),Me={control:function(){return{border:"1px solid #828282",borderRadius:0,display:"flex",alignItems:"center",padding:"18px 16px"}},indicatorSeparator:function(){return{display:"none",opacity:0}},placeholder:function(){return{color:"var(--black)",margin:"0"}},dropdownIndicator:function(){return{padding:0,color:"var(--black)",background:"var(--white)"}},menuList:function(e){return Object(s.a)(Object(s.a)({},e),{},{maxHeight:"165px",padding:0})},valueContainer:function(){return{padding:0,display:"flex",alignItems:"center",flex:1,flexWrap:"wrap",position:"relative",overflow:"hidden",boxSizing:"border-box"}}},Ve=function(e){var t=e.selectedOption,n=e.handleChange,i=e.options,c=e.disabled,r=e.placeholder,o=Object(y.a)(e,["selectedOption","handleChange","options","disabled","placeholder"]);return Object(a.jsx)(Fe.a,Object(s.a)({value:t,onChange:n,options:i,isDisabled:c,placeholder:r||"",isSearchable:!1,styles:Me},o))};Ve.defaultProps={handleChange:function(){},options:[],selectedOption:{}};var Ue=Ve,Ze=n(54),Be=n.n(Ze),He=function(e){var t,n=e.className,i=e.lastRow,c=e.submitRow,r=Object(y.a)(e,["className","lastRow","submitRow"]);return Object(a.jsx)("div",Object(s.a)({className:Object(C.a)([Be.a.formRow,n,(t={},Object(_.a)(t,"".concat(Be.a["last-row"]),!!i),Object(_.a)(t,"".concat(Be.a["submit-row"]),!!c),t)])},r))},De=function(e){var t=e.onAdd,n=e.onCancel,c=Object(i.useState)(""),r=Object(g.a)(c,2),o=r[0],l=r[1],s=Object(i.useState)({}),d=Object(g.a)(s,2),u=d[0],j=d[1];return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({email:o,role:null===u||void 0===u?void 0:u.value}),n()},children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{type:"email",value:o,onChange:function(e){l(e.target.value)},fw:!0})}),Object(a.jsx)(He,{children:Object(a.jsx)(Ue,{onChange:j,selectedOption:u,options:xe})}),Object(a.jsxs)(Q,{children:[Object(a.jsx)(K,{type:"submit",disabled:!o.trim().length||!(null===u||void 0===u?void 0:u.value),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(a.jsx)(K,{onClick:n,view:"text",icon:Object(a.jsx)(Ae,{}),children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})})},We=n(15),ze=n.n(We),Je=function(){var e=Object(i.useState)(""),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(""),o=Object(g.a)(r,2),l=o[0];o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",value:n,fw:!0,onChange:function(e){return c(e.target.value)},type:"password"})}),Object(a.jsx)(He,{children:Object(a.jsx)("div",{className:ze.a["form-item"],children:Object(a.jsx)(K,{disabled:l,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})})]})},Ke=function(){var e=Object(i.useState)("pending"),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)([]),o=Object(g.a)(r,2),l=o[0],d=o[1],u=Object(i.useState)(!1),j=Object(g.a)(u,2),b=j[0],v=j[1],p=Object(i.useState)(!1),O=Object(g.a)(p,2),f=O[0],_=O[1],y=Object(i.useState)(null),k=Object(g.a)(y,2),N=k[0],S=k[1],E=Object(i.useContext)(kn),L=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,i,r,o,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.role,c("userPending"),e.prev=2,e.next=5,oe.post("/Users",{email:n,role:a});case 5:i=e.sent,S(null),d([].concat(Object(he.a)(l),[i.data.data])),h.b.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),h.b.error((null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(o=r.data)||void 0===o||null===(s=o.meta)||void 0===s?void 0:s.message)||ge(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status));case 15:c("success");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe.put("/Users/".concat(t),{role:n}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;d(l.map((function(e){return e.id===n.id?n:e})))})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){c("pending"),oe.get("Users").then((function(e){var t=e.data;d(t.data.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{type:"current"})})))})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))})),c("success")}),[]);var A="formPending"===n;return"pending"===n?Object(a.jsx)("div",{className:ze.a.wrap,children:Object(a.jsx)(ce,{})}):Object(a.jsxs)("div",{className:ze.a.wrap,children:[Object(a.jsx)(w.a,{children:Object(a.jsx)("title",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438"})}),Object(a.jsx)(I,{children:"\u0422\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u0434\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u0440\u0443\u0433\u0438\u043c \u0447\u043b\u0435\u043d\u0430\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u044b"}),b&&Object(a.jsx)(ee,{isOpen:!0,onExit:function(){return v(!1)},children:Object(a.jsx)(De,{onAdd:L,onCancel:function(){return v(!1)}})}),f&&Object(a.jsx)(ee,{className:"popup-restore-pass",isOpen:!0,onExit:function(){return _("")},children:Object(a.jsx)(Oe,{email:f,onCancel:function(){return _("")}})}),N&&Object(a.jsx)(ee,{className:"popup-restore-pass",isOpen:!0,onExit:function(){return S(null)},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(ie,{size:"l",tc:!0,children:["\u0422\u043e\u0447\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",Object(a.jsx)("strong",{children:N.email})," ?"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)(Q,{align:"space-around",children:[Object(a.jsx)(K,{onClick:function(){var e;e=N.id,oe.delete("/Users/".concat(e)).then((function(){d(l.filter((function(t){return t.id!==e}))),S(null),h.b.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0434\u0430\u043b\u0435\u043d")})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))},children:"\u0414\u0430, \u0443\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(a.jsx)(K,{view:"text",onClick:function(){return S(null)},icon:Object(a.jsx)(pe,{}),children:"\u041d\u0430\u0437\u0430\u0434"})]})]})}),Object(a.jsxs)("div",{className:ze.a["form-wrap"],children:[Object(a.jsxs)("div",{className:ze.a["inputs-wrap"],children:[l.map((function(e){var t,n,i=e.id===(null===E||void 0===E||null===(t=E.user)||void 0===t?void 0:t.id);return Object(a.jsxs)("div",{className:ze.a["form-item-grid"],children:[Object(a.jsx)("div",{className:ze.a["form-item-input"],children:Object(a.jsx)(P,{value:e.email,readOnly:!0,fw:!0,type:"email"})}),Object(a.jsx)("div",{className:ze.a["form-item-select"],children:i?Object(a.jsx)(P,{value:e.role,readOnly:!0,fw:!0}):Object(a.jsx)(Ue,{onChange:function(t){T(e.id,t.value)},selectedOption:{value:null===e||void 0===e?void 0:e.role,label:null===(n=fe[null===e||void 0===e?void 0:e.role])||void 0===n?void 0:n.label},options:xe})}),Object(a.jsx)("div",{className:ze.a.aside,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:ze.a["aside-row"],children:Object(a.jsx)("button",{disabled:A,onClick:function(){e&&_(e.email)},type:"button",className:Object(C.a)(["button-clear-style",ze.a["aside-row-btn"],ze.a["aside-row-btn--reset"]]),children:"\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})}),!i&&E.user.role===fe.Owner.value&&Object(a.jsx)("div",{className:ze.a["aside-row"],children:Object(a.jsx)("button",{onClick:function(){return S(e)},disabled:A,type:"button",className:Object(C.a)(["button-clear-style",ze.a["aside-row-btn"],ze.a["aside-row-btn--delete"]]),children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"})})]})})]},e.id)})),Object(a.jsx)("div",{className:ze.a["form-item"],children:Object(a.jsx)(K,{view:"add",type:"button",fw:!0,disabled:A,onClick:function(){v(!0)},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),"userPending"===n&&Object(a.jsx)(ce,{})]}),Object(a.jsx)("br",{}),Object(a.jsx)(Je,{})]})]})},Xe=n(55),Ge=n.n(Xe),Qe=function(e){var t=e.text,n=e.onClick,i=void 0===n?function(){}:n;return Object(a.jsxs)("button",{className:Object(C.a)(["button-clear-style",Ge.a.wrap]),onClick:i,children:[Object(a.jsx)("div",{className:Ge.a["text-wrap"],children:Object(a.jsx)(ie,{children:t})}),Object(a.jsx)("div",{className:Ge.a.plus,children:"+"})]})},Ye=n(32),qe=n(94);function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function et(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tt=i.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM3.46 8.88L4.87 7.47L7 9.59L9.12 7.47L10.53 8.88L8.41 11L10.53 13.12L9.12 14.53L7 12.41L4.88 14.53L3.47 13.12L5.59 11L3.46 8.88ZM10.5 1L9.5 0H4.5L3.5 1H0V3H14V1H10.5Z",fill:"currentColor"});function nt(e,t){var n=e.title,a=e.titleId,c=et(e,["title","titleId"]);return i.createElement("svg",$e({width:14,height:18,viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,tt)}var at=i.forwardRef(nt),it=(n.p,n(29)),ct=n.n(it),rt=function(e){var t=e.name,n=e.id,i=e.handleRemove;return Object(a.jsxs)("div",{className:ct.a["file-card"],children:[t,Object(a.jsx)("button",{type:"button",className:ct.a["file-delete"],onClick:function(){return i(n)},children:Object(a.jsx)(at,{})})]})},ot=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("File",t),n.append("Name",t.name),oe.defaults.headers["Content-Type"]="multipart/form-data",e.next=6,oe.post("File/upload",n);case 6:return a=e.sent,i=a.data,oe.defaults.headers["Content-Type"]="application/json",e.abrupt("return",{id:i.data.id,name:t.name});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(e){var t=e.previewText,n=e.options,c=void 0===n?{}:n,r=e.onSuccess,o=void 0===r?function(){}:r,l=e.defaultFiles,d=void 0===l?[]:l,u=Object(i.useState)(d),j=Object(g.a)(u,2),b=j[0],v=j[1],p=Object(qe.a)(Object(s.a)({},c)),O=p.acceptedFiles,h=p.getRootProps,f=p.getInputProps,w=p.isDragActive;Object(i.useEffect)((function(){o(b.map((function(e){return e.id})))}),[b]),Object(i.useEffect)((function(){var e;O.length&&(e=O,function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(t);case 2:n=e.sent,v([].concat(Object(he.a)(b),Object(he.a)(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e))}),[O]);return Object(a.jsxs)("section",{className:ct.a.ctn,children:[b.length>0&&Object(a.jsx)("div",{className:ct.a["files-list"],children:b.map((function(e){return Object(a.jsx)(rt,{id:e.id,name:e.name,handleRemove:function(e){return function(e){v(b.filter((function(t){return t.id!==e})))}(e)}},e.id)}))}),Object(a.jsxs)("div",Object(s.a)(Object(s.a)({},h({className:Object(C.a)([ct.a.dropzone,Object(_.a)({},ct.a["drag-active"],w)])})),{},{children:[Object(a.jsx)("input",Object(s.a)({},f())),Object(a.jsx)("div",{className:ct.a["preview-text"],children:t})]}))]})},st=[{value:"Option",label:"\u043e\u043f\u0446\u0438\u044f"},{value:"AdditionalOption",label:"\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043e\u043f\u0446\u0438\u044f"}],dt=function(e){var t=e.constructiveId,n=e.optionData,c=e.onSuccess,r=Object(i.useState)((function(){return(null===n||void 0===n?void 0:n.type)?st.find((function(e){return e.value===n.type})):null})),o=Object(g.a)(r,2),l=o[0],d=o[1];return Object(a.jsx)(Ye.a,{initialValues:{name:null===n||void 0===n?void 0:n.name,description:null===n||void 0===n?void 0:n.description,constructiveId:t},onSubmit:function(e,a){var i=a.setSubmitting;if(!l)return h.b.error("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0438\u043f \u043e\u043f\u0446\u0438\u0438"),!1;i(!0);var r="post",o="Options/create";(null===n||void 0===n?void 0:n.id)&&(r="put",o="Options/update/".concat(n.id)),oe[r](o,{name:e.name,description:e.description,constructiveId:t,type:l.value}).then((function(e){c(Object(s.a)({constructiveId:t},e.data.data)),i(!1)})).catch((function(e){var t,n,a,c;h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(c=e.response)||void 0===c?void 0:c.status)),i(!1)}))},children:function(e){var t=e.values,n=e.handleChange,i=e.handleSubmit,c=e.isSubmitting;return Object(a.jsxs)("form",{onSubmit:i,children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u043f\u0446\u0438\u0438",name:"name",onChange:n,value:t.name})}),Object(a.jsx)(He,{children:Object(a.jsx)(Ue,{onChange:d,selectedOption:l,options:st})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,textarea:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",onChange:n,value:t.description})}),Object(a.jsx)(He,{children:Object(a.jsx)(K,{type:"submit",disabled:c,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}})},ut=function(e){var t=e.onExit,n=e.projectId,i=e.activeConstructiveData,c=e.setConstructiveInfo;return Object(a.jsxs)("div",{children:[Object(a.jsx)(Ye.a,{initialValues:{description:"",name:null===i||void 0===i?void 0:i.name},onSubmit:function(e,t){var a=t.setSubmitting;a(!0);var r="post",o="Constructives/create";(null===i||void 0===i?void 0:i.id)&&(r="put",o="Constructives/update/".concat(i.id)),oe[r](o,{name:e.name,projectId:n}).then((function(e){c(e.data.data),a(!1)})).catch((function(e){var t;console.error(e),h.b.error(ge(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)),a(!1)}))},children:function(e){var n=e.values,c=e.handleChange,r=e.handleSubmit,o=e.isSubmitting;return Object(a.jsxs)("form",{onSubmit:r,children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u0430",name:"name",onChange:c,value:n.name})}),Object(a.jsxs)(Q,{children:[Object(a.jsx)(K,{type:"submit",disabled:o,children:i?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(a.jsx)(K,{view:"text",type:"button",onClick:t,icon:Object(a.jsx)(Ae,{}),children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}}),Object(a.jsx)("br",{}),!i&&Object(a.jsx)(ie,{children:"\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0446\u0438\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432"})]})},jt=function(e){var t=e.onExit,n=e.onSuccess,c=e.projectId,r=e.data,o=void 0===r?{}:r,l=Object(i.useState)([]),s=Object(g.a)(l,2),d=s[0],u=s[1],j=Object(v.g)();return Object(a.jsx)("div",{children:Object(a.jsx)(Ye.a,{initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",price:(null===o||void 0===o?void 0:o.price)||"",description:(null===o||void 0===o?void 0:o.description)||""},onSubmit:function(e,t){var a=e.name,i=e.description,r=e.price,l=t.setSubmitting,s="post",u="Project/create";c&&(s="put",u="Project/update/".concat(c)),oe[s](u,{name:a,description:i,price:r,files:d}).then((function(e){if(null===o||void 0===o?void 0:o.files.length){var t=null===o||void 0===o?void 0:o.files.map((function(e){return e.id}));c=d,t.forEach((function(e){c.find((function(t){return t===e}))||oe.delete("File/delete/".concat(e))}))}var c;j.push("/cottageForm/".concat(e.data.data.id)),n({name:a,description:i,price:r,files:d}),l(!1)})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status)),l(!1)}))},children:function(e){var n=e.values,i=e.handleChange,c=e.handleSubmit,r=e.isSubmitting;return Object(a.jsxs)("form",{onSubmit:c,children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",onChange:i,value:n.name})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,textarea:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",onChange:i,value:n.description})}),Object(a.jsx)(He,{children:Object(a.jsx)(lt,{options:{accept:"image/jpeg, image/png",maxFiles:5},defaultFiles:(null===o||void 0===o?void 0:o.files)||[],onSuccess:function(e){u(e)},previewText:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u0430\u0439\u043b\u044b \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438"})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,name:"price",placeholder:"\u0426\u0435\u043d\u0430",type:"number",onChange:i,value:n.price})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,textarea:!0,name:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:i,value:n.description})}),Object(a.jsxs)(Q,{children:[Object(a.jsx)(K,{type:"submit",disabled:r,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(a.jsx)(K,{view:"text",type:"button",onClick:t,icon:Object(a.jsx)(Ae,{}),children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}})})},bt=n(31),vt=n.n(bt),pt=function(e){var t=e.onClick,n=void 0===t?function(){}:t,i=e.onRemove,c=e.children,r=e.rightAside;return Object(a.jsx)("div",{className:vt.a.wrap,children:Object(a.jsxs)("div",{className:vt.a.content,children:[Object(a.jsx)("button",{className:vt.a.btn,type:"button",onClick:n,children:"..."}),Object(a.jsx)("div",{className:vt.a.body,children:Object(a.jsx)(ie,{children:Object(a.jsx)("div",{className:vt.a.text,children:c})})}),Object(a.jsxs)("div",{className:vt.a.rightAside,children:[Object(a.jsx)("strong",{children:r}),i&&Object(a.jsx)("div",{className:vt.a.remove,children:Object(a.jsx)("button",{type:"button",className:vt.a["remove-btn"],onClick:i,children:Object(a.jsx)(at,{})})})]})]})})},Ot=n(43),ht=n.n(Ot),ft=function(e){var t=e.checked,n=e.disabled,i=e.onChange,c=void 0===i?function(){}:i,r=Object(y.a)(e,["checked","disabled","onChange"]);return Object(a.jsxs)("label",{className:ht.a["choice-wrap"],children:[Object(a.jsx)("input",Object(s.a)({className:ht.a.input,type:"radio",onChange:c,checked:t,disabled:n},r)),Object(a.jsx)("div",{className:ht.a["choice-faker"],children:Object(a.jsx)("div",{className:ht.a["choice-faker-content"]})})]})},mt=n(44),xt=n.n(mt);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _t=i.createElement("path",{d:"M2 4.8L5.5 8L12 2",stroke:"white",strokeWidth:4,strokeLinecap:"round"});function yt(e,t){var n=e.title,a=e.titleId,c=wt(e,["title","titleId"]);return i.createElement("svg",gt({width:14,height:11,viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,_t)}var Ct=i.forwardRef(yt),kt=(n.p,function(e){var t=e.checked,n=e.disabled,i=e.onChange,c=Object(y.a)(e,["checked","disabled","onChange"]);return Object(a.jsxs)("label",{className:xt.a["choice-wrap"],children:[Object(a.jsx)("input",Object(s.a)({className:xt.a.input,type:"checkbox",onChange:i,checked:t,disabled:n},c)),Object(a.jsx)("div",{className:xt.a["choice-faker"],children:Object(a.jsx)("div",{className:xt.a["choice-faker-img"],children:Object(a.jsx)(Ct,{})})})]})}),Nt=n(33),St=n.n(Nt),It=function(e){var t=e.constructiveInfo,n=e.onConstructiveClick,i=e.onOptionCreate,c=e.onOptionEdit,r=e.handleCaseFormData,o=e.handleCaseRemove,l=e.handleOptionRemove,d=e.handleConstructiveRemove;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){var t;return Object(a.jsxs)("div",{className:St.a["info-item"],children:[Object(a.jsxs)(pt,{onRemove:function(){return d(e.id)},onClick:function(){return n(e)},children:[e.name," id ",e.id]}),(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.length)>0&&Object(a.jsxs)("div",{className:St.a["option-item"],children:[Object(a.jsx)("div",{className:St.a["option-item__title"],children:Object(a.jsxs)(I,{level:3,children:["\u041e\u043f\u0446\u0438\u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u0430 ",e.name]})}),e.options.map((function(t){var n;return Object(a.jsxs)("div",{className:St.a["option-wrap"],children:[Object(a.jsx)(pt,{onClick:function(){c(e,t)},onRemove:function(){l({constructiveId:e.id,optionId:t.id})},children:Object(a.jsxs)("div",{className:St.a["option-content"],children:[Object(a.jsx)("div",{className:St.a["form-option-wrap"],children:"Option"===t.type?Object(a.jsx)(ft,{defaultChecked:!0}):Object(a.jsx)(kt,{defaultChecked:!0})}),t.name]})}),(null===t||void 0===t||null===(n=t.cases)||void 0===n?void 0:n.length)>0&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:St.a["cases-item__title"],children:Object(a.jsxs)(I,{level:3,children:["\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043e\u043f\u0446\u0438\u0439 ",t.name]})}),null===t||void 0===t?void 0:t.cases.map((function(n){var i,c;return Object(a.jsxs)(pt,{rightAside:_e(n.price),onRemove:(null===t||void 0===t||null===(i=t.cases)||void 0===i?void 0:i.length)>1?function(){o(Object(s.a)(Object(s.a)({},n),{},{optionId:t.id,constructiveId:e.id}))}:null,onClick:function(){r(Object(s.a)(Object(s.a)({},n),{},{optionId:t.id,constructiveId:e.id}))},children:[n.name,(null===n||void 0===n||null===(c=n.files)||void 0===c?void 0:c.length)>0&&Object(a.jsxs)(a.Fragment,{children:[" ",n.files.length," ",ye(["\u0444\u0430\u0439\u043b","\u0444\u0430\u0439\u043b\u0430","\u0444\u0430\u0439\u043b\u043e\u0432"],n.files.length)," "]})]},n.id)}))]}),Object(a.jsx)("div",{children:Object(a.jsx)(K,{onClick:function(){r({optionId:t.id,constructiveId:e.id})},view:"add",children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u043f\u0446\u0438\u0438"})}),Object(a.jsx)("hr",{})]},t.id)}))]}),Object(a.jsx)(K,{onClick:function(){return i(e)},view:"add",children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0446\u0438\u044e"})]},e.id)}))})},Et=n(56),Lt=n.n(Et),Pt=n(35),Tt=n.n(Pt),At=n(45),Rt=n.n(At),Ft=function(e){var t,n,c,r=e.caseId,o=Object(i.useState)(""),l=Object(g.a)(o,2),s=l[0],d=l[1],u=Object(i.useState)(!1),j=Object(g.a)(u,2),b=j[0],v=j[1],p=Object(i.useState)(null),O=Object(g.a)(p,2),f=O[0],w=O[1],_=Object(i.useState)([]),y=Object(g.a)(_,2),C=y[0],k=y[1],N=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n,a,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return",!1);case 2:return v(!0),e.prev=3,e.next=6,oe.post("Cases/".concat(r,"/link/").concat(f.id));case 6:t=e.sent,t.data.data?(d(""),h.b.success("\u0421\u0432\u044f\u0437\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):h.b.error(ge()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),h.b.error((null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a||null===(i=a.meta)||void 0===i?void 0:i.message)||ge(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status));case 14:v(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return t=function(){if(s.length<=2)return k([]),!1;oe.get("Cases",{params:{NameContains:s}}).then((function(e){var t=e.data;k(t.data.filter((function(e){return e.id!==r})))}))},n=[s],c=300,Object(i.useEffect)((function(){var e=setTimeout((function(){return t()}),c);return function(){return clearTimeout(e)}}),[].concat(Object(he.a)(n||[]),[c])),Object(a.jsxs)("div",{className:Rt.a.wrap,children:[Object(a.jsx)(I,{level:3,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u044f\u0437\u044f\u043c\u0438"}),Object(a.jsx)(He,{children:Object(a.jsx)(Tt.a,{onOutsideClick:function(){k([])},children:Object(a.jsxs)("div",{className:Rt.a["suggestions-wrap"],children:[Object(a.jsx)(P,{fw:!0,disabled:b,value:s,onChange:function(e){d(e.target.value)}}),C.length>0&&Object(a.jsx)("ul",{className:Rt.a["suggestions-list"],children:C.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)("button",{onClick:function(){d(e.name),w(e),k([])},className:Rt.a["suggestions-list__btn"],children:e.name})},e.id)}))})]})})}),Object(a.jsx)(K,{onClick:N,disabled:b,type:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c"})]})},Mt=function(e){var t=e.caseData,n=e.onSuccess,c=Object(i.useState)([]),r=Object(g.a)(c,2),o=r[0],l=r[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(I,{level:3,children:["\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u043c \u043e\u043f\u0446\u0438\u0438 ",t.name]}),Object(a.jsx)(Ye.a,{initialValues:{name:(null===t||void 0===t?void 0:t.name)||"",code:(null===t||void 0===t?void 0:t.code)||"",price:null===t||void 0===t?void 0:t.price},onSubmit:function(e,a){var i=a.setSubmitting;if(!e.price)return h.b.error("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0446\u0435\u043d\u0443"),!1;i(!0);var c="post",r="Cases/create";(null===t||void 0===t?void 0:t.id)&&(c="put",r="Cases/update/".concat(t.id)),oe[c](r,{name:e.name,code:e.code,price:Number(e.price),optionId:t.optionId,files:o}).then((function(e){n(Object(s.a)(Object(s.a)({},t),e.data.data)),i(!1)})).catch((function(e){var t,n,a,c;h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(c=e.response)||void 0===c?void 0:c.status)),i(!1)}))},children:function(e){var t=e.values,n=e.handleChange,i=e.handleSubmit,c=e.isSubmitting;return Object(a.jsxs)("form",{onSubmit:i,children:[Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043e\u043f\u0446\u0438\u0438",name:"name",onChange:n,value:t.name})}),Object(a.jsx)(He,{children:Object(a.jsx)(lt,{options:{accept:"image/jpeg, image/png",maxFiles:5},defaultFiles:o,onSuccess:function(e){l(e)},previewText:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u0430\u0439\u043b\u044b \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043e\u043f\u0446\u0438\u0439"})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u0426\u0435\u043d\u0430",name:"price",onChange:n,value:t.price})}),Object(a.jsx)(He,{children:Object(a.jsx)(P,{fw:!0,placeholder:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",name:"code",onChange:n,value:t.code})}),Object(a.jsx)(He,{children:Object(a.jsx)(K,{type:"submit",disabled:c,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}}),(null===t||void 0===t?void 0:t.id)&&Object(a.jsx)(Ft,{caseId:t.id})]})},Vt=function(e){var t,n,c,r,o,l=Object(v.i)(),d=Object(i.useState)(null),u=Object(g.a)(d,2),j=u[0],b=u[1],p=Object(i.useState)(null),O=Object(g.a)(p,2),f=O[0],_=O[1],C=Object(i.useState)([]),k=Object(g.a)(C,2),N=k[0],S=k[1],E=Object(i.useState)(null),L=Object(g.a)(E,2),P=L[0],T=L[1],A=Object(i.useState)(null),R=Object(g.a)(A,2),F=R[0],M=R[1],V=Object(i.useState)(null),U=Object(g.a)(V,2),Z=U[0],B=U[1],H=Object(i.useState)(null),D=Object(g.a)(H,2),W=D[0],z=D[1];Object(i.useEffect)((function(){var e;(null===l||void 0===l||null===(e=l.params)||void 0===e?void 0:e.cottageId)&&"new"!==l.params.cottageId&&z(l.params.cottageId)}),[null===l||void 0===l||null===(t=l.params)||void 0===t?void 0:t.cottageId]);Object(i.useEffect)((function(){var e,t=null===l||void 0===l||null===(e=l.params)||void 0===e?void 0:e.cottageId;if(t&&"new"!==t){_(null),S([]),b(null),T(null),M(null),B(null),oe.get("Project/get/".concat(t)).then((function(e){_(e.data.data)}));var n=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,i,c,r,o,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.map((function(e){return e.id}))).length){e.next=17;break}return a=n.map((function(e){return"ConstructiveIds[]=".concat(e)})),e.next=5,oe.get("Options?".concat(a.join("&")));case 5:return i=e.sent,c={},r={},(o=i.data.data).forEach((function(e){c[e.constructiveId]?c[e.constructiveId].push(e):c[e.constructiveId]=[e]})),l=o.map((function(e){return e.id})),e.next=13,Promise.all(l.map(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("Options/".concat(t,"/cases"));case 2:e.sent.data.data.forEach((function(e){r[e.optionId]?r[e.optionId].push(e):r[e.optionId]=[e]}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:d=t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{options:c[e.id]?c[e.id].map((function(e){return r[e.id]?Object(s.a)(Object(s.a)({},e),{},{cases:r[e.id]}):e})):[]})})),S(d),e.next=18;break;case 17:S(t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();oe.get("Project/".concat(t,"/constructives")).then((function(e){n(e.data.data)}))}}),[null===l||void 0===l||null===(n=l.params)||void 0===n?void 0:n.cottageId]);var J=function(){b(null),T(null),M(null),B(null)};Object(i.useEffect)((function(){J()}),[N]),Object(i.useEffect)((function(){j||J()}),[j]);return Object(a.jsxs)("div",{className:Lt.a["page-wrap"],children:[Object(a.jsx)(w.a,{children:Object(a.jsx)("title",{children:"new"===(null===e||void 0===e||null===(c=e.match)||void 0===c||null===(r=c.params)||void 0===r?void 0:r.cottageId)?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u0442\u0442\u0435\u0434\u0436\u0430":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u0442\u0442\u0435\u0434\u0436\u0435\u043c"})}),Object(a.jsxs)("div",{className:Lt.a["page-row"],children:[Object(a.jsx)(I,{level:2,children:"\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f"}),f?Object(a.jsxs)(pt,{onClick:function(e){T(e),b("baseInfo")},rightAside:_e(f.price),children:[(null===(o=f.files)||void 0===o?void 0:o.length)>0&&Object(a.jsxs)(a.Fragment,{children:[f.files.length," ",ye(["\u0444\u0430\u0439\u043b","\u0444\u0430\u0439\u043b\u0430","\u0444\u0430\u0439\u043b\u043e\u0432"],f.files.length)," "]}),f.description]}):Object(a.jsx)(Qe,{onClick:function(){return b("baseInfo")},text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0430\u0437\u043e\u0432\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e"})]}),W&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:Lt.a["page-row"],children:[Object(a.jsx)(I,{level:2,children:"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438"}),N?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(It,{onConstructiveClick:function(e){b("configuration"),T(e)},onOptionCreate:function(e){b("option"),T(e)},onOptionEdit:function(e,t){b("option"),T(e),M(t)},handleCaseFormData:function(e){b("case"),B(e)},handleConstructiveRemove:function(e){return function(e){oe.delete("Constructives/delete/".concat(e)).then((function(t){if(200===t.status){var n=Object(he.a)(N).filter((function(t){var n=t.id;return e!==n}));S(n)}})).catch((function(e){var t,n,a,i;h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))}(e)},handleOptionRemove:function(e){return function(e){oe.delete("Options/delete/".concat(e.optionId)).then((function(t){if(200===t.status){var n=Object(he.a)(N).map((function(t){return t.id===e.constructiveId&&t.options.length?Object(s.a)(Object(s.a)({},t),{},{options:t.options.filter((function(t){var n=t.id;return e.optionId!==n}))}):t}));S(n)}})).catch((function(e){var t,n,a,i;h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))}(e)},handleCaseRemove:function(e){return function(e){var t=e.constructiveId,n=e.optionId,a=Object(y.a)(e,["constructiveId","optionId"]);oe.delete("Cases/delete/".concat(e.id)).then((function(i){if(200===i.status){var c=Object(he.a)(N).map((function(i){return i.id===t&&i.options.length?Object(s.a)(Object(s.a)({},i),{},{options:i.options.map((function(t){return t.id===n&&(null===t||void 0===t?void 0:t.cases.find((function(t){return t.id===e.id})))?Object(s.a)(Object(s.a)({},t),{},{cases:t.cases.filter((function(e){return e.id!==a.id}))}):t}))}):i}));S(c)}else h.b.error(ge())})).catch((function(e){var t,n,a,i;h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))}(e)},constructiveInfo:N}),Object(a.jsx)("div",{children:Object(a.jsx)(K,{onClick:function(){return b("configuration")},view:"add",children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432"})})]}):Object(a.jsx)(Qe,{onClick:function(){return b("configuration")},text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u0430"})]})}),j&&Object(a.jsxs)(ee,{onExit:function(){return b(null)},xl:!0,isOpen:!0,children:["baseInfo"===j&&Object(a.jsx)(jt,{projectId:W,onSuccess:function(e){_(e),b(null)},data:f,onExit:J}),"configuration"===j&&Object(a.jsx)(ut,{projectId:Number(W),activeConstructiveData:P,setConstructiveInfo:function(e){var t=Object(he.a)(N);t=N.some((function(t){return t.id===e.id}))?t.map((function(t){return t.id===e.id?e:t})):[].concat(Object(he.a)(t),[e]),S(t)},onExit:J}),"option"===j&&P&&Object(a.jsx)(dt,{optionData:F,constructiveId:P.id,onSuccess:function(e){!function(e){var t=e.constructiveId,n=Object(y.a)(e,["constructiveId"]);console.log(e,"data");var a=Object(he.a)(N).map((function(e){return e.id===t?e.options.length?Object(s.a)(Object(s.a)({},e),{},{options:e.options.map((function(e){return e.id===n.id?(console.log(e,"optionItem"),console.log(n,"rest"),console.log("hit"),n):e}))}):Object(s.a)(Object(s.a)({},e),{},{options:[n]}):e}));S(a)}(e),J()}}),"case"===j&&Object(a.jsx)(Mt,{caseData:Z,onSuccess:function(e){!function(e){var t=e.constructiveId,n=e.optionId,a=Object(y.a)(e,["constructiveId","optionId"]),i=Object(he.a)(N).map((function(i){return i.id===t&&i.options.length?Object(s.a)(Object(s.a)({},i),{},{options:i.options.map((function(t){var i;return t.id===n?(null===t||void 0===t?void 0:t.cases.find((function(t){return t.id===e.id})))?Object(s.a)(Object(s.a)({},t),{},{cases:t.cases.map((function(e){return e.id===a.id?a:e}))}):(null===t||void 0===t||null===(i=t.cases)||void 0===i?void 0:i.length)>0?Object(s.a)(Object(s.a)({},t),{},{cases:[].concat(Object(he.a)(t.cases),[a])}):Object(s.a)(Object(s.a)({},t),{},{cases:[a]}):t}))}):i}));S(i)}(e),J()}})]})]})},Ut=n(24),Zt=n.n(Ut);function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ht(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Dt=i.createElement("path",{d:"M17.1401 10.9384C17.1801 10.6384 17.2001 10.3284 17.2001 9.99844C17.2001 9.67844 17.1801 9.35844 17.1301 9.05844L19.1601 7.47844C19.3401 7.33844 19.3901 7.06844 19.2801 6.86844L17.3601 3.54844C17.2401 3.32844 16.9901 3.25844 16.7701 3.32844L14.3801 4.28844C13.8801 3.90844 13.3501 3.58844 12.7601 3.34844L12.4001 0.808437C12.3601 0.568437 12.1601 0.398438 11.9201 0.398438H8.08011C7.84011 0.398438 7.65011 0.568437 7.61011 0.808437L7.25011 3.34844C6.66011 3.58844 6.12011 3.91844 5.63011 4.28844L3.24011 3.32844C3.02011 3.24844 2.77011 3.32844 2.65011 3.54844L0.74011 6.86844C0.62011 7.07844 0.66011 7.33844 0.86011 7.47844L2.89011 9.05844C2.84011 9.35844 2.80011 9.68844 2.80011 9.99844C2.80011 10.3084 2.82011 10.6384 2.87011 10.9384L0.84011 12.5184C0.66011 12.6584 0.61011 12.9284 0.72011 13.1284L2.64011 16.4484C2.76011 16.6684 3.01011 16.7384 3.23011 16.6684L5.62011 15.7084C6.12011 16.0884 6.65011 16.4084 7.24011 16.6484L7.60011 19.1884C7.65011 19.4284 7.84011 19.5984 8.08011 19.5984H11.9201C12.1601 19.5984 12.3601 19.4284 12.3901 19.1884L12.7501 16.6484C13.3401 16.4084 13.8801 16.0884 14.3701 15.7084L16.7601 16.6684C16.9801 16.7484 17.2301 16.6684 17.3501 16.4484L19.2701 13.1284C19.3901 12.9084 19.3401 12.6584 19.1501 12.5184L17.1401 10.9384ZM10.0001 13.5984C8.02011 13.5984 6.40011 11.9784 6.40011 9.99844C6.40011 8.01844 8.02011 6.39844 10.0001 6.39844C11.9801 6.39844 13.6001 8.01844 13.6001 9.99844C13.6001 11.9784 11.9801 13.5984 10.0001 13.5984Z",fill:"currentColor"});function Wt(e,t){var n=e.title,a=e.titleId,c=Ht(e,["title","titleId"]);return i.createElement("svg",Bt({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,Dt)}var zt=i.forwardRef(Wt);n.p;function Jt(){return(Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Kt(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Xt=i.createElement("path",{d:"M1 16L11 18V1.5L1 3.5V16Z",stroke:"currentColor",strokeWidth:2}),Gt=i.createElement("path",{d:"M17 4H11V16H17V4Z",stroke:"currentColor",strokeWidth:2}),Qt=i.createElement("path",{d:"M15 7H11",stroke:"currentColor",strokeWidth:2}),Yt=i.createElement("path",{d:"M15 10H11",stroke:"currentColor",strokeWidth:2}),qt=i.createElement("path",{d:"M15 13H11",stroke:"currentColor",strokeWidth:2}),$t=i.createElement("path",{d:"M3 6.8L5.14286 6.4L6 9.2L6.85714 6.4L9 6L6.85714 10L9 14L6.85714 13.6L5.57143 10.8L4.71429 13.2H3L4.71429 10L3 6.8Z",fill:"currentColor"});function en(e,t){var n=e.title,a=e.titleId,c=Kt(e,["title","titleId"]);return i.createElement("svg",Jt({width:18,height:20,viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,Xt,Gt,Qt,Yt,qt,$t)}var tn=i.forwardRef(en);n.p;n.p;var nn=function(){var e,t=Object(i.useContext)(kn),n=t.user,c=t.handleAuthState,r=t.handleManageCottageVisible,o=!!(null===(e=Object(v.i)("/cottageForm/:cottageId"))||void 0===e?void 0:e.isExact);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("header",{className:Zt.a.wrap,children:Object(a.jsxs)("div",{className:Zt.a.content,children:[(null===n||void 0===n?void 0:n.isOwner)&&Object(a.jsx)("div",{className:Zt.a["settings-wrap"],children:Object(a.jsx)(l.b,{to:"/manageUsers",className:"button-clear-style ".concat(Zt.a["setting-link"]),children:Object(a.jsx)(zt,{})})}),Object(a.jsxs)("div",{className:Zt.a.user,children:[Object(a.jsx)(l.b,{to:"/",children:null===n||void 0===n?void 0:n.email}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(K,{view:"text",type:"button",onClick:function(){c(null)},children:"\u0412\u044b\u0445\u043e\u0434"})})]}),((null===n||void 0===n?void 0:n.isAdmin)||(null===n||void 0===n?void 0:n.isOwner))&&Object(a.jsx)("div",{className:Zt.a["add-item"],children:Object(a.jsx)(K,{view:"dark",onClick:function(){return r(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043a\u043e\u0442\u0442\u0435\u0434\u0436\u0430"})}),Object(a.jsx)("div",{className:Zt.a["header-actions"],children:Object(a.jsx)("div",{className:Zt.a["header-actions-item"],children:Object(a.jsx)(K,{view:"text",icon:Object(a.jsx)(tn,{}),disabled:!o,children:"\u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u044d\u043a\u0441\u0435\u043b\u044c"})})}),Object(a.jsxs)("div",{className:Zt.a["header-publish"],children:[Object(a.jsx)("div",{className:Zt.a["header-publish-item"],children:Object(a.jsx)(K,{view:"bordered",disabled:!o,children:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})}),Object(a.jsx)("div",{className:Zt.a["header-publish-item"],children:Object(a.jsx)(K,{disabled:!o,children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})]})})})};function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function cn(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var rn=i.createElement("path",{d:"m159.988281 318.582031c-3.988281 4.011719-9.429687 6.25-15.082031 6.25s-11.09375-2.238281-15.082031-6.25l-120.449219-120.46875c-12.5-12.5-12.5-32.769531 0-45.246093l15.082031-15.085938c12.503907-12.5 32.75-12.5 45.25 0l75.199219 75.203125 203.199219-203.203125c12.503906-12.5 32.769531-12.5 45.25 0l15.082031 15.085938c12.5 12.5 12.5 32.765624 0 45.246093zm0 0"});function on(e,t){var n=e.title,a=e.titleId,c=cn(e,["title","titleId"]);return i.createElement("svg",an({viewBox:"0 -46 417.81333 417",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,rn)}var ln=i.forwardRef(on),sn=(n.p,n(9)),dn=n.n(sn),un=function(e){var t=e.cottage,n=e.onSuccess,c=Object(i.useState)((null===t||void 0===t?void 0:t.name)||""),r=Object(g.a)(c,2),o=r[0],l=r[1];return Object(a.jsx)(Tt.a,{children:Object(a.jsxs)("div",{className:dn.a["list-row"],children:[Object(a.jsx)("div",{className:dn.a["list-row-value"],children:Object(a.jsx)(P,{value:o,fw:!0,autoFocus:!0,onChange:function(e){return l(e.target.value)}})}),Object(a.jsx)(K,{className:"button-clear-style ".concat(dn.a["side-btn"]),onClick:function(){oe.put("Project/update/".concat(t.id),{name:o,description:t.description,price:t.price,files:t.files}).then((function(e){n(Object(s.a)(Object(s.a)({},t),{},{name:o}))}))},children:Object(a.jsx)(ln,{})})]})})};function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function bn(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var vn=i.createElement("rect",{width:16,height:2,fill:"#C1C1C1"}),pn=i.createElement("rect",{y:6,width:16,height:2,fill:"#C1C1C1"}),On=i.createElement("rect",{y:12,width:16,height:2,fill:"#C1C1C1"});function hn(e,t){var n=e.title,a=e.titleId,c=bn(e,["title","titleId"]);return i.createElement("svg",jn({width:16,height:14,viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?i.createElement("title",{id:a},n):null,vn,pn,On)}var fn=i.forwardRef(hn),mn=(n.p,function(e){var t,n=e.onClose,c=Object(i.useContext)(kn),r=Object(i.useState)([]),o=Object(g.a)(r,2),d=o[0],u=o[1],j=Object(i.useState)("pending"),b=Object(g.a)(j,2),v=b[0],p=b[1],O=Object(i.useState)(null),f=Object(g.a)(O,2),m=f[0],x=f[1],w=Object(i.useState)(null),_=Object(g.a)(w,2),k=_[0],N=_[1],S=Object(i.useState)(""),I=Object(g.a)(S,2),E=I[0],L=I[1];Object(i.useEffect)((function(){p("pending"),oe.get("Project").then((function(e){u(e.data.data)})),p("initial")}),[]);var T=function(){x(null),L(""),N(null)},A=function(e){var t=e.id,n=e.actionType,a=Object(y.a)(e,["id","actionType"]);T(),N(Object(s.a)({id:t,actionType:n},a))};return"pending"===v?Object(a.jsx)(ce,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:dn.a.list,children:[d.map((function(e){return(null===k||void 0===k?void 0:k.id)===e.id?Object(a.jsx)(i.Fragment,{children:Object(a.jsx)(un,{onExit:T,onSuccess:function(e){u(d.map((function(t){return e.id===t.id?e:t}))),T()},cottage:k.cottage})},null===e||void 0===e?void 0:e.id):Object(a.jsxs)("div",{className:dn.a["list-row"],children:[Object(a.jsx)("div",{className:dn.a["list-row-value"],children:Object(a.jsx)(P,{readOnly:!0,value:null===e||void 0===e?void 0:e.name,fw:!0})}),Object(a.jsxs)("div",{className:Object(C.a)([dn.a["list-row-btn"],dn.a["context-menu-wrap"]]),children:[Object(a.jsx)(K,{className:"button-clear-style",onClick:function(){x(m||0===m?null:e.id)},children:Object(a.jsx)(fn,{})}),m===e.id&&Object(a.jsx)(Tt.a,{onOutsideClick:function(){T()},children:Object(a.jsx)("div",{className:dn.a["context-menu"],children:Object(a.jsxs)("div",{className:dn.a["context-menu-inner"],children:[Object(a.jsx)(l.b,{to:"/cottageForm/".concat(e.id),onClick:n,className:Object(C.a)(["button-clear-style",dn.a["context-menu-item"]]),children:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(a.jsx)("button",{onClick:function(){return A({id:null===e||void 0===e?void 0:e.id,cottage:e,actionType:"rename"})},className:Object(C.a)(["button-clear-style",dn.a["context-menu-item"]]),children:"\u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c"}),Object(a.jsx)("button",{type:"button",onClick:function(){return function(e){if(!e)return!1;oe.post("Project/".concat(e,"/duplicate")).then((function(e){T(),u([].concat(Object(he.a)(d),[e.data.data]))})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))}(null===e||void 0===e?void 0:e.id)},className:Object(C.a)(["button-clear-style",dn.a["context-menu-item"]]),children:"\u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(a.jsx)("button",{type:"button",onClick:function(){return A({id:null===e||void 0===e?void 0:e.id,actionType:"link"})},className:Object(C.a)(["button-clear-style",dn.a["context-menu-item"]]),children:"\u0441\u0432\u044f\u0437\u0430\u0442\u044c \u0441"}),Object(a.jsx)("button",{type:"button",onClick:function(){return t=null===e||void 0===e?void 0:e.id,void oe.delete("Project/delete/".concat(t)).then((function(e){T(),u(d.filter((function(e){return e.id!==t})))})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}));var t},className:Object(C.a)(["button-clear-style",dn.a["context-menu-item"]]),children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})})})]})]},null===e||void 0===e?void 0:e.id)})),"initial"===v&&Object(a.jsx)("div",{className:dn.a["list-row"],children:Object(a.jsx)("div",{className:dn.a["list-row-value"],children:Object(a.jsx)(K,{to:"/cottageForm/new",onClick:function(){return c.handleManageCottageVisible(!1)},view:"add",fw:!0,children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043a\u043e\u0442\u0442\u0435\u0434\u0436\u0430"})})}),("link"===(null===k||void 0===k?void 0:k.actionType)||"unlink"===(null===k||void 0===k?void 0:k.actionType))&&Object(a.jsx)("div",{className:dn.a["list-row"],children:Object(a.jsxs)("div",{className:dn.a["autocomplete-wrap"],children:[Object(a.jsx)(P,{value:E,onChange:function(e){return L(e.target.value)},fw:!0}),(null===E||void 0===E||null===(t=E.trim())||void 0===t?void 0:t.length)>0&&Object(a.jsx)("div",{className:dn.a["autocomplete-list"],children:Object(a.jsx)(a.Fragment,{children:d.filter((function(e){return e.title.toLowerCase().includes(E.toLowerCase())})).map((function(e){return Object(a.jsx)("button",{onClick:function(){var t;t={actionType:k.actionType,id:e.id},t.actionType,T()},type:"button",className:Object(C.a)(["button-clear-style",dn.a["autocomplete-list-item"]]),children:e.title},e.id)}))})})]})})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("br",{}),Object(a.jsx)(K,{view:"text",icon:Object(a.jsx)(Ae,{}),onClick:function(){return c.handleManageCottageVisible(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}),xn=n(64),gn=n.n(xn),wn=function(){var e=Object(i.useState)([]),t=Object(g.a)(e,2),n=t[0],c=t[1];return Object(i.useEffect)((function(){oe.get("Project").then((function(e){c(e.data.data)}))}),[]),Object(a.jsx)("div",{className:gn.a.list,children:n.map((function(e){return Object(a.jsx)(l.b,{to:"/cottageForm/".concat(e.id),className:gn.a["list-row"],children:Object(a.jsx)(ie,{children:e.name})},e.id)}))})},_n=(n(164),n(37)),yn=n.n(_n),Cn=function(){var e=Object(i.useContext)(kn),t=e.accessToken,n=e.handleAuthState,c=Object(v.h)(),r=Object(v.g)(),o=Object(i.useState)(""),l=Object(g.a)(o,2),s=l[0],d=l[1],u=Object(i.useState)(""),j=Object(g.a)(u,2),b=j[0],p=j[1],O=Object(i.useState)(!1),f=Object(g.a)(O,2),m=f[0];f[1];Object(i.useEffect)((function(){var e=new URLSearchParams(c.search),a=e.get("token"),i=e.get("email");a&&i?t&&n(null):r.push("/")}),[t]);var x=s.length&&b.length&&s===b;return Object(a.jsx)("div",{className:yn.a.wrap,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(I,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(a.jsxs)("form",{className:yn.a.form,onSubmit:function(e){e.preventDefault();var t=new URLSearchParams(c.search),n=t.get("token"),a=t.get("email");oe.post("Users/reset-password?token=".concat(n,"&email=").concat(a),{password:s,confirmPassword:b}).then((function(){r.push("/"),h.b.success("\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u0431\u0440\u043e\u0448\u0435\u043d, \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e")})).catch((function(e){var t,n,a,i;console.error(e),h.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.message)||ge(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))}))},autoComplete:"off",children:[Object(a.jsxs)("div",{className:yn.a["input-wrap"],children:[Object(a.jsx)(D,{value:s,fw:!0,wrapClass:yn.a["input-row"],disabled:m,onChange:function(e){d(e.target.value)}}),Object(a.jsx)(D,{value:b,disabled:m,fw:!0,wrapClass:yn.a["input-row"],onChange:function(e){p(e.target.value)}})]}),Object(a.jsxs)(Q,{children:[Object(a.jsx)(K,{disabled:!x||m,type:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(a.jsx)(K,{view:"text",to:"/",children:"\u044f \u0432\u0441\u043f\u043e\u043c\u043d\u0438\u043b \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},kn=c.a.createContext({accessToken:"",manageCottageVisible:!1,user:null,setUser:function(){}}),Nn=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleAuthState=function(e){a.setState({accessToken:e}),e?(O.a.defaults.headers,localStorage.setItem("accessToken",e)):localStorage.removeItem("accessToken")},a.handleAuthToken=function(){a.state.accessToken?(oe.defaults.headers.Authorization="Bearer ".concat(a.state.accessToken),a.fetchUser()):(delete oe.defaults.headers.Authorization,localStorage.removeItem("accessToken"),a.setState({user:null}))},a.fetchUser=function(){oe.get("Users/current").then((function(e){var t,n=e.data;a.setState({user:Object(s.a)(Object(s.a)({},n.data),{},{isAdmin:(t=n.data.role,t===fe.Admin.value),isOwner:we(n.data.role)})})})).catch((function(e){var t;h.b.error(ge(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))}))},a.handleManageCottageVisible=function(e){a.setState({manageCottageVisible:e})},a.state={accessToken:localStorage.getItem("accessToken"),manageCottageVisible:!1,user:null},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleAuthToken()}},{key:"componentDidUpdate",value:function(e,t){t.accessToken!==this.state.accessToken&&this.handleAuthToken()}},{key:"render",value:function(){var e=this.state,t=e.accessToken,n=e.manageCottageVisible,i=e.user;return Object(a.jsx)(kn.Provider,{value:{accessToken:t,manageCottageVisible:n,user:i,handleAuthState:this.handleAuthState,handleManageCottageVisible:this.handleManageCottageVisible},children:Object(a.jsx)(Sn,{manageCottageVisible:n,accessToken:t,handleManageCottageVisible:this.handleManageCottageVisible,handleAuthState:this.handleAuthState,user:i})})}}]),n}(i.Component),Sn=function(e){var t=e.accessToken,n=e.manageCottageVisible,i=e.handleManageCottageVisible,c=e.handleAuthState,r=e.user;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(l.a,{children:[!!t&&Object(a.jsx)(nn,{}),Object(a.jsx)("main",{children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"/reset-password",children:Object(a.jsx)(Cn,{})}),t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.b,{exact:!0,path:"/manageUsers",children:r&&!(null===r||void 0===r?void 0:r.isOwner)?Object(a.jsx)(v.a,{to:"/"}):Object(a.jsx)(Ke,{})}),Object(a.jsx)(v.b,{exact:!0,path:"/cottageForm/:cottageId",children:r&&!(null===r||void 0===r?void 0:r.isAdmin)?Object(a.jsx)(v.a,{to:"/"}):Object(a.jsx)(Vt,{})}),Object(a.jsx)(v.b,{exact:!0,path:"/",children:Object(a.jsx)(wn,{})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.b,{exact:!0,path:"/auth",children:Object(a.jsx)(Re,{handleAuthState:c})}),Object(a.jsx)(v.a,{to:"/auth"})]})]})}),n&&Object(a.jsx)(ee,{wide:!0,isOpen:!0,onExit:function(){return i(!1)},children:Object(a.jsx)(mn,{onClose:function(){return i(!1)}})})]}),Object(a.jsx)(h.a,{position:"bottom-left",autoClose:5e3,closeOnClick:!0})]})},In=Object(v.j)(Nn);n(165).config(),o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(l.a,{children:Object(a.jsx)(In,{})})}),document.getElementById("root"))},24:function(e,t,n){e.exports={wrap:"style_wrap__1PiV9",content:"style_content__2EUWe","settings-wrap":"style_settings-wrap__13gX6",user:"style_user__2o_GH","add-item":"style_add-item__3LD0X","header-actions":"style_header-actions__1oVOd","header-actions-item":"style_header-actions-item__3lZfT","header-publish":"style_header-publish__1Ogm9","setting-link":"style_setting-link__2Bf-K"}},26:function(e,t,n){e.exports={wrap:"style_wrap__ThyTO",input:"style_input__1JjVt","with-right-addon":"style_with-right-addon__3RRll",fw:"style_fw__allmL","input-fw":"style_input-fw__3pVwZ","right-addon":"style_right-addon__1b0Gl","toggle-pass-icon":"style_toggle-pass-icon__VGU6B","toggle-visibility-icon":"style_toggle-visibility-icon__JDQgf",textarea:"style_textarea__W_bF3"}},29:function(e,t,n){e.exports={ctn:"style_ctn__2ppdu",dropzone:"style_dropzone__10Lnu","preview-text":"style_preview-text__1kABF","drag-active":"style_drag-active__1Thk3","files-list":"style_files-list__1d6OJ","file-card":"style_file-card__2i-dn","file-delete":"style_file-delete__3xMxr"}},30:function(e,t,n){e.exports={button:"style_button__2YIYr","button-primary":"style_button-primary__2Whmd","button-dark":"style_button-dark__2cD4L","button-bordered":"style_button-bordered__2Ssro","button-text":"style_button-text__29D0K","button-add":"style_button-add__2Z6es","button-fw":"style_button-fw__IyfBj",icon:"style_icon__2Saie"}},31:function(e,t,n){e.exports={wrap:"style_wrap__3UEaU",content:"style_content__3OJY2",btn:"style_btn__URbH8",body:"style_body__303FZ",text:"style_text__3-1Hc",rightAside:"style_rightAside__1V_GQ",remove:"style_remove__26aud","remove-btn":"style_remove-btn__2Bd3P"}},33:function(e,t,n){e.exports={"info-item":"style_info-item__X0-fL","option-item":"style_option-item__3HiZh","option-wrap":"style_option-wrap__ddRLA","option-item__title":"style_option-item__title__1ooLd","cases-item__title":"style_cases-item__title__1mQ-Z","option-content":"style_option-content__1D7l8","form-option-wrap":"style_form-option-wrap__3qaMS"}},36:function(e,t,n){e.exports={wrap:"style_wrap__2ugOv",form:"style_form__3ysS7","input-wrap":"style_input-wrap__3v_O_","input-row":"style_input-row__2DA4I"}},37:function(e,t,n){e.exports={wrap:"style_wrap__3wxls",form:"style_form__3KNN_","input-wrap":"style_input-wrap__T0kq1","input-row":"style_input-row__Ok3Js"}},42:function(e,t,n){e.exports={wrap:"style_wrap__3ffQI",textWrap:"style_textWrap__1dbn-"}},43:function(e,t,n){e.exports={"choice-wrap":"styles_choice-wrap__3pNSg",input:"styles_input__3HOf7","choice-faker":"styles_choice-faker__25e0u","choice-faker-content":"styles_choice-faker-content__20aUb"}},44:function(e,t,n){e.exports={"choice-wrap":"styles_choice-wrap__A-p62",input:"styles_input__29mOr","choice-faker":"styles_choice-faker__1jTGe","choice-faker-img":"styles_choice-faker-img__2Rnpx"}},45:function(e,t,n){e.exports={"suggestions-wrap":"style_suggestions-wrap__8xiZ3","suggestions-list":"style_suggestions-list__26AJh","suggestions-list__btn":"style_suggestions-list__btn__7_wXl"}},52:function(e,t,n){e.exports={"submit-row":"style_submit-row__1Z3y7","submit-row-item":"style_submit-row-item__1QLfL","space-around":"style_space-around__36Ych"}},53:function(e,t,n){e.exports={text:"style_text__2oX-B","text--l":"style_text--l__38w6G",centered:"style_centered__3NHGR"}},54:function(e,t,n){e.exports={formRow:"style_formRow__2MKV7","last-row":"style_last-row__3_Tw3","submit-row":"style_submit-row__2QQET"}},55:function(e,t,n){e.exports={wrap:"style_wrap__3mUWJ","text-wrap":"style_text-wrap__1oUWF",plus:"style_plus__segF6"}},56:function(e,t,n){e.exports={"page-wrap":"style_page-wrap__24IIF","page-row":"style_page-row__2x-V4"}},61:function(e,t,n){e.exports={heading:"style_heading__2z84O","heading--h1":"style_heading--h1__3xqYX","heading--h2":"style_heading--h2__2e0lX"}},64:function(e,t,n){e.exports={list:"style_list__3BWYE","list-row":"style_list-row__3Fpaq"}},9:function(e,t,n){e.exports={list:"style_list__1cl2Z","list-row":"style_list-row__Oor7H","context-menu-wrap":"style_context-menu-wrap__36JKJ","context-menu":"style_context-menu__27KI3","context-menu-inner":"style_context-menu-inner__U16G-","context-menu-item":"style_context-menu-item__3TJlK","autocomplete-wrap":"style_autocomplete-wrap__1XQ5H","autocomplete-list":"style_autocomplete-list__vwb52","autocomplete-list-item":"style_autocomplete-list-item__12K_h","side-btn":"style_side-btn__14xJ5"}}},[[168,1,2]]]);
//# sourceMappingURL=main.1eb4ab3e.chunk.js.map